<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI Κριτής - Σωκράτης (Σταθερή Βαθμολογία + Σχόλιο)</title>
  <style> 
    body { font-family: system-ui, Arial, sans-serif; background:#173b88; color:#fff; margin:0; display:flex; align-items:center; justify-content:center; min-height:100vh; }
    .app { background:#0e2a66; border-radius:20px; padding:20px; max-width:420px; width:100%; box-shadow:0 8px 24px rgba(0,0,0,.3); }
    h1 { font-size:22px; margin:0 0 5px 0; }
    h2 { font-size:18px; margin:0 0 12px 0; color:#cfe0ff; }
    select, textarea { width:100%; padding:10px; border-radius:10px; border:0; margin:10px 0; font-size:16px; }
    button { width:100%; padding:14px; border-radius:20px; border:0; font-size:18px; margin:10px 0; cursor:pointer; }
    .btn-primary { background:linear-gradient(135deg,#cde7ff,#caa5ff); color:#000; }
    .btn-secondary { background:linear-gradient(135deg,#6ee0ff,#3db8ff); color:#002140; }
    .panel { background:rgba(255,255,255,.08); border-radius:15px; padding:12px; margin:10px 0; }
    .score { font-size:20px; font-weight:700; text-align:center; margin-top:10px; }
    .tiny { font-size:12px; color:#cfe0ff; opacity:.9 }
    .row { display:flex; gap:8px; }
    .row > * { flex:1; }
    .recording { position: relative; }
    .recording::after{
      content:"";
      position:absolute;
      top:-6px; right:-6px;
      width:12px; height:12px;
      background:#ff4d4d; border-radius:50%;
      box-shadow:0 0 0 0 rgba(255,77,77,0.7);
      animation:pulse 1.4s infinite;
    }
    @keyframes pulse{
      0%{ box-shadow:0 0 0 0 rgba(255,77,77,0.7) }
      70%{ box-shadow:0 0 0 12px rgba(255,77,77,0) }
      100%{ box-shadow:0 0 0 0 rgba(255,77,77,0) }
    }

#timerPanel {
  background: rgba(255, 255, 255, 0.15);
  font-size: 18px;
  text-align: center;
  font-weight: bold;
  margin-top: 10px;
  border-radius: 12px;
  padding: 10px;
}
#timer {
  color: #ffde59;
}

#activePlayerBar .tiny { opacity:.9; }
#activePlayerBar #bonusBtn[disabled] { opacity:.5; cursor:not-allowed; }

/* Κάνει το setup screen scrollable */
#setupScreen {
  overflow-y: auto;
  max-height: 100vh;
}

/* Εμφάνιση όταν επιλέγεται ένας χαρακτήρας */
.character.selected {
  outline: 4px solid white;
  transform: scale(1.05);
  transition: 0.2s;
}

  /* === Διάταξη χαρακτήρων σε πλέγμα === */
#characterSelection {
  display: grid !important;
  grid-template-columns: repeat(2, minmax(120px, 1fr));
  gap: 20px;
  justify-items: center;
  margin-top: 20px;
}

.character {
  background: rgba(255,255,255,0.1);
  border-radius: 15px;
  padding: 10px;
  text-align: center;
  width: 120px;
}

.character img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: contain;
  background-color: #ffffff;
  margin-bottom: 5px;
  padding: 3px;
  transition: transform 0.2s;
}

.character img:hover {
  transform: scale(1.08);
}
    
  </style>
</head>
<body>

<!-- === ΑΡΧΙΚΗ ΟΘΟΝΗ (Welcome Screen) === -->
<div id="welcomeScreen" style="
  position:fixed;
  inset:0;
  background:linear-gradient(180deg,#102a6d,#173b88);
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:40px 20px 20px 20px;
  text-align:center;
  z-index:2000;
">
  <img src="images/Socrates.png" alt="Σωκράτης" style="width:160px;height:160px;border-radius:50%;margin-bottom:20px;object-fit:cover;">

  <h1 style="font-size:24px;margin-bottom:10px;">AI Κριτής - Σωκράτης</h1>
  <p style="font-size:15px;opacity:0.85;margin-bottom:25px;">
    Ένα φιλοσοφικό παιχνίδι επιχειρηματολογίας για παιδιά και μεγάλους.
  </p>

  <!-- === ΚΟΥΜΠΙΑ ΑΡΧΙΚΗΣ ΟΘΟΝΗΣ (Main Buttons) === -->
  <div class="button-container">
    <button id="goToSetup">🎮 Νέο Παιχνίδι</button>
    <button id="infoButton">ℹ️ Πληροφορίες</button>
  </div>
</div>

<!-- === ΡΥΘΜΙΣΕΙΣ ΠΑΙΧΝΙΔΙΟΥ (Setup Screen) === -->
<div id="setupScreen" style="
  position:fixed;
  inset:0;
  background:rgba(10,20,60,0.95);
  color:white;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  z-index:1000;
  text-align:center;
  padding:40px 20px 20px 20px;
">

  <h1 style="margin-bottom:20px;">🎮 Ρυθμίσεις Παιχνιδιού</h1>

  <label>Αριθμός Παικτών:
    <select id="playerCount" style="margin-left:10px;">
      <option value="2" selected>2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
    </select>
  </label>

 <div id="characterSelection" style="margin:20px 0;">

    <!-- Εδώ θα δημιουργηθούν τα avatars δυναμικά -->
  </div>

  <label>Αριθμός Γύρων:
    <select id="roundCount" style="margin-left:10px;">
      <option value="1">1</option>
      <option value="2" selected>2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
  </label>

  <label style="margin-top:15px;">
    <input type="checkbox" id="useBonus" checked>
    Χρήση καρτών +30″
  </label>

  <button id="startGameBtn" style="
    margin-top:30px;
    background:linear-gradient(135deg,#ffd166,#ff7e5f);
    border:0;
    border-radius:25px;
    padding:12px 30px;
    font-size:18px;
    cursor:pointer;
    color:#001;
    font-weight:bold;
  ">
    🚀 Έναρξη Παιχνιδιού
  </button>

</div>

<script>
const characters = [
  { name: "Λία", color: "#ffd166", img: "images/Lia.png" },
  { name: "Ιάσωνας", color: "#06d6a0", img: "images/Jason.png" },
  { name: "Τζέημς", color: "#118ab2", img: "images/James.png" },
  { name: "Μάρκος", color: "#ef476f", img: "images/Marco.png" },
  { name: "Άννα", color: "#a29bfe", img: "images/Anna.png" },
  { name: "Μέι Λιν", color: "#ffb6b9", img: "images/May Lin.png" }
];

let selectedCharacters = []; // αποθηκεύει τις επιλογές

function renderCharacterSelection() {
  const container = document.getElementById("characterSelection");
  const status = document.createElement("div");
  status.id = "selectionStatus";
  status.style.marginTop = "10px";
  status.style.fontWeight = "bold";
  status.style.textAlign = "center";
  container.after(status);

  container.innerHTML = "";
  characters.forEach(ch => {
    const btn = document.createElement("button");
    btn.innerHTML = `
      <img src="${ch.img}" style="width:60px;height:60px;border-radius:50%;display:block;margin:0 auto 5px;">
      ${ch.name}
    `;
    btn.style.background = ch.color;
    btn.style.border = "none";
    btn.style.color = "#000";
    btn.style.padding = "10px 15px";
    btn.style.borderRadius = "15px";
    btn.style.fontWeight = "700";
    btn.style.cursor = "pointer";
    btn.style.minWidth = "80px";

    btn.dataset.id = ch.name.toLowerCase().replace(/\s+/g,"");
btn.dataset.name = ch.name;
btn.dataset.color = ch.color;
btn.dataset.img = ch.img;
btn.classList.add("character");

btn.addEventListener("click", () => toggleCharacter(ch, btn));

    container.appendChild(btn);
  });

  updateSelectionStatus();
}

function toggleCharacter(ch, btn) {
  const playerSelect = document.getElementById("playerCount");
  const count = parseInt(playerSelect.value);
  const idx = selectedCharacters.findIndex(c => c.name === ch.name);

  if (idx !== -1) {
    // Αν είναι ήδη επιλεγμένος, τον αφαιρούμε
    selectedCharacters.splice(idx, 1);
    btn.style.outline = "none";
    btn.classList.remove("selected");
  } else {
    // Αν δεν είναι επιλεγμένος
    if (selectedCharacters.length >= count) {
      alert(`Μπορείς να επιλέξεις έως ${count} χαρακτήρες.`);
      return; // σταματάμε εδώ
    }
    selectedCharacters.push(ch);
    btn.style.outline = "4px solid white";
    btn.classList.add("selected");
  }

  updateSelectionStatus();
}

function updateSelectionStatus() {
  const count = parseInt(document.getElementById("playerCount").value);
  const status = document.getElementById("selectionStatus");
  status.textContent = `Έχεις επιλέξει ${selectedCharacters.length} από ${count} χαρακτήρες.`;
}

renderCharacterSelection();

document.getElementById("playerCount").addEventListener("change", () => {
  // Αν μειωθεί ο αριθμός παικτών και έχουμε παραπάνω χαρακτήρες, αφαίρεσέ τους
  const count = parseInt(document.getElementById("playerCount").value);
  if (selectedCharacters.length > count) {
    selectedCharacters = selectedCharacters.slice(0, count);
  }
  // Αφαίρεσε τα outlines από όσους “κόπηκαν”
  document.querySelectorAll(".character").forEach(btn => {
    const name = btn.textContent.trim();
    if (!selectedCharacters.find(c => c.name === name)) {
      btn.style.outline = "none";
      btn.classList.remove("selected");
    }
  });
  updateSelectionStatus();
});

</script>

  <div class="app">
  <h1 id="missionTitle">Αποστολή</h1>
  <h2 id="missionQuestion">—</h2>

<div class="panel" id="activePlayerBar">
  <div style="display:flex; align-items:center; gap:10px; justify-content:space-between;">
    <div style="display:flex; align-items:center; gap:10px;">
      <div id="activeAvatar" style="width:36px;height:36px;border-radius:50%;background:#cfe0ff;color:#0e2a66;display:flex;align-items:center;justify-content:center;font-weight:700;">
        Λ
      </div>
      <div>
        <div style="font-weight:700;">Ενεργός Παίκτης: <span id="activePlayerName">—</span></div>
        <div class="tiny">Γύρος: <span id="roundLabel">1</span>/<span id="roundTotal">2</span></div>
      </div>
    </div>

    <div style="display:flex; gap:8px;">
      <button class="btn-secondary" id="bonusBtn" title="Κάρτα +30″" style="min-width:90px;">+30″</button>
      <button class="btn-secondary" id="nextPlayerBtn" style="min-width:150px;">Επόμενος Παίκτης ⟶</button>
    </div>
  </div>
</div>


  <div class="row">
    <select id="missionSelect"></select>
    <select id="langSelect" title="Γλώσσα Ακρόασης">
      <option value="el-GR" selected>Ελληνικά</option>
      <option value="en-US">English</option>
    </select>
  </div>

  <textarea id="transcript" placeholder="Μίλα στο μικρόφωνο ή γράψε εδώ την απάντηση του παίκτη…"></textarea>

  <button class="btn-primary" id="listenBtn">🎙️ Ο Σωκράτης ακούει</button>
  <button class="btn-secondary" id="scoreBtn">⚖️ Βαθμολογία</button>
  <button class="btn-secondary" id="speakBtn">🔊 Άκου τον Σωκράτη</button>

<div class="panel" id="timerPanel">
  ⏳ Χρόνος: <span id="timer">1:30</span>
</div>

  <div class="panel">
    <strong>Σχόλιο Σωκράτη:</strong>
    <div id="socraticComment">—</div>
  </div>

<!-- Ανάλυση Βαθμολογίας πάει εδώ -->
<div class="panel" id="criteriaPanel">
  <strong>Ανάλυση Βαθμολογίας:</strong>
  <ul id="criteriaList" style="margin:5px 0 0 15px; padding:0;"></ul>
</div>

<div class="panel score" id="totalScore">—/10</div>

<script>

const missions = [
  {id:"M-001",title:"Δίκαιο",question:"Τι είναι δίκαιο;"},
  {id:"M-002",title:"Φιλία",question:"Τι σημαίνει να είμαι φίλος;"},
  {id:"M-003",title:"Επιτυχία",question:"Γιατί δεν μπορώ να τα έχω όλα;"},
  {id:"M-004",title:"Ευγνωμοσύνη",question:"Γιατί λέμε \"ευχαριστώ\";"},
  {id:"M-005",title:"Αλήθεια",question:"Πρέπει πάντα να λέμε την αλήθεια;"},
  {id:"M-006",title:"Θάρρος",question:"Τι σημαίνει να είσαι γενναίος;"},
  {id:"M-007",title:"Αποδοχή Ήττας",question:"Είναι δίκαιο να χάνω;"},
  {id:"M-008",title:"Αγάπη",question:"Πώς δείχνουμε ότι αγαπάμε;"},
  {id:"M-009",title:"Κανόνες",question:"Γιατί υπάρχουν κανόνες;"},
  {id:"M-010",title:"Ευτυχία",question:"Τι σε κάνει πραγματικά χαρούμενο;"},
  {id:"M-011",title:"Ελπίδα/Όνειρα",question:"Γιατί είναι σημαντικό να ονειρεύεσαι;"},
  {id:"M-012",title:"Πραγματικότητα",question:"Τι είναι αληθινό;"},
  {id:"M-013",title:"Σεβασμός",question:"Πώς δείχνεις σεβασμό;"},
  {id:"M-014",title:"Αυτοσυνείδηση",question:"Πώς ξέρω ποιος είμαι;"},
  {id:"M-015",title:"Ζήλεια",question:"Είναι κακό να ζηλεύω;"},
  {id:"M-016",title:"Καλοσύνη",question:"Τι σημαίνει να είμαι καλός;"},
  {id:"M-017",title:"Ελευθερία",question:"Τι είναι η Ελευθερία;"},
  {id:"M-018",title:"Ψυχή",question:"Υπάρχει Ψυχή;"},
  {id:"M-019",title:"Νόημα της Ζωής",question:"Έχει νόημα η Ζωή;"},
  {id:"M-020",title:"Σωστό-Λάθος",question:"Ποιος αποφασίζει τι είναι σωστό;"},
  {id:"M-021",title:"Τεχνητή Νοημοσύνη",question:"Πόση Τεχνητή Νοημοσύνη είναι αρκετή;"}
];

// === Αρχικό state παιχνιδιού (προσωρινό MVP) ===
const game = {
  players: [
    { id: 'p1', name: 'Λία', color: '#ffd166', bonusLeft: 1 },
    { id: 'p2', name: 'Ιάσωνας', color: '#06d6a0', bonusLeft: 1 }
  ],
  currentRound: 1,
  totalRounds: 2,
  activeIndex: 0,       // ποιος παίζει τώρα
  baseTimeSec: 90
};

function renderActivePlayer() {
  const p = game.players[game.activeIndex];
  // Όνομα & avatar
  document.getElementById('activePlayerName').textContent = p.name;
  document.getElementById('activeAvatar').textContent = p.name[0] || 'Π';
  document.getElementById('activeAvatar').style.background = p.color || '#cfe0ff';
  // Γύροι
  document.getElementById('roundLabel').textContent = game.currentRound;
  document.getElementById('roundTotal').textContent = game.totalRounds;
  // Bonus κουμπί (θα το “δέσουμε” αργότερα με λογική)
  const bonusBtn = document.getElementById('bonusBtn');
  bonusBtn.disabled = p.bonusLeft <= 0;
}

function loadMissions(){
  const sel = document.getElementById("missionSelect");
  missions.forEach(m=>{
    const opt = document.createElement("option");
    opt.value = m.id;
    opt.textContent = `${m.id} — ${m.title}`;
    sel.appendChild(opt);
  });
  renderMission(missions[0].id);
}

function renderMission(id){
  const m = missions.find(x=>x.id===id);
  document.getElementById("missionTitle").textContent = `Αποστολή ${m.id}`;
  document.getElementById("missionQuestion").textContent = `${m.title}: ${m.question}`;
  document.getElementById("missionSelect").value = id;
}

// === Χρονόμετρο 1:30 ===
let timerInterval = null;
let isTimerRunning = false;

function startTimer(durationSec = 90) {
  clearInterval(timerInterval);
  let remaining = durationSec;

  function updateDisplay() {
    const minutes = Math.floor(remaining / 60);
    const seconds = remaining % 60;
    document.getElementById("timer").textContent =
      `${minutes}:${seconds.toString().padStart(2,"0")}`;
  }

  updateDisplay();
  timerInterval = setInterval(() => {
    remaining--;
if (remaining < 0) {
  clearInterval(timerInterval);
  isTimerRunning = false;
  document.getElementById("timer").textContent = "⏰ Τέλος!";

  // Πιο ήρεμος ήχος
  const audio = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");
  audio.play();

  // Σταμάτα αυτόματα το μικρόφωνο αν είναι ενεργό
  try { if (recognition && recognizing) recognition.stop(); } catch(e) {}

  return;
}
    
    updateDisplay();
  }, 1000);
}


// === Φωνή Σωκράτη (Text-to-Speech) ===
document.getElementById("speakBtn").addEventListener("click", ()=>{
  const comment = document.getElementById("socraticComment").textContent.trim();
  if(!comment || comment==="—"){ 
    alert("Δεν υπάρχει σχόλιο για να διαβαστεί.");
    return;
  }
  const utterance = new SpeechSynthesisUtterance(comment);

  // Προσπάθησε να βρει ελληνική φωνή
  const voices = speechSynthesis.getVoices();
  const greekVoice = voices.find(v => v.lang.startsWith("el"));
  if(greekVoice) utterance.voice = greekVoice;

  speechSynthesis.speak(utterance);
});

// === Speech-to-Text ===
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
let recognition = null;
let recognizing = false;
let finalTranscript = "";

function initSTT(){
  if(!SpeechRecognition){
    alert("Ο browser δεν υποστηρίζει Speech Recognition. Πρότεινεται Chrome σε desktop/Android.");
    return;
  }
  recognition = new SpeechRecognition();
  recognition.continuous = true;
  recognition.interimResults = true;
  recognition.lang = document.getElementById("langSelect").value;

  recognition.onstart = () => {
    recognizing = true;
    document.getElementById("listenBtn").classList.add("recording");
    document.getElementById("listenBtn").textContent = "■ Σταμάτα την ακρόαση";
  };
  recognition.onend = () => {
    recognizing = false;
    document.getElementById("listenBtn").classList.remove("recording");
    document.getElementById("listenBtn").textContent = "🎙️ Ο Σωκράτης ακούει";
  };
  recognition.onerror = (e) => {
    console.warn("STT error:", e.error);
  };
  recognition.onresult = (event) => {
    let interim = "";
    for (let i = event.resultIndex; i < event.results.length; i++) {
      const res = event.results[i];
      if (res.isFinal) finalTranscript += res[0].transcript + " ";
      else interim += res[0].transcript;
    }
    document.getElementById("transcript").value = (finalTranscript + " " + interim).trim();
  };
}

document.getElementById("langSelect").addEventListener("change", () => {
  if(recognition){ recognition.lang = document.getElementById("langSelect").value; }
});


// Όταν ξεκινάει η ακρόαση, ξεκινάει και το χρονόμετρο 1:30
document.getElementById("listenBtn").addEventListener("click", ()=>{
  if(!recognition){ initSTT(); }
  if(!recognition){ return; }
  if(!recognizing){
    finalTranscript = document.getElementById("transcript").value.trim() + " ";
    recognition.start();
    startTimer(90); // <-- ξεκινάει το χρονόμετρο
  }else{
    recognition.stop();
    clearInterval(timerInterval); // σταματάει το χρονόμετρο
  }
});

// Όταν αλλάζεις Αποστολή στο dropdown, ενημερώνει τον τίτλο/ερώτημα
document.getElementById("missionSelect").addEventListener("change", (e)=>{
  renderMission(e.target.value);
});

// === Σταθερή Βαθμολογία (temperature 0) μέσω του server ===
async function getScore(transcript, mission) {
  try {
    const response = await fetch("/api/score", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        type: "score",
        transcript,
        mission
      })
    });

    const data = await response.json();
    return data;
  } catch (err) {
    return { error: "Σφάλμα στη βαθμολογία.", raw: String(err) };
  }
}

/// === Σχόλιο Σωκράτη (temperature 0.5) μέσω του server ===
async function getComment(transcript, mission) {
  try {
    const response = await fetch("/api/score", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        type: "comment",
        transcript,
        mission
      })
    });

    const data = await response.json();
    return data.comment || "—";
  } catch (err) {
    return "Σφάλμα στο σχόλιο.";
  }
}

// === Κουμπί Βαθμολογίας ===
document.getElementById("scoreBtn").addEventListener("click", async ()=>{
  const transcript = document.getElementById("transcript").value.trim();
  const missionId = document.getElementById("missionSelect").value;
  const mission = missions.find(m=>m.id===missionId);

  // Κλήσεις για βαθμολογία + σχόλιο
  const scores = await getScore(transcript, mission);
  const comment = await getComment(transcript, mission);

  // Αν υπήρξε σφάλμα
  if(scores.error){
    document.getElementById("socraticComment").textContent = scores.error;
    document.getElementById("totalScore").textContent = "--/10";
    document.getElementById("criteriaList").innerHTML = "";
    return;
  }

  // Ενημέρωση σχολίου
  document.getElementById("socraticComment").textContent = comment;

  // Εμφάνιση αναλυτικής βαθμολογίας
  const criteriaList = document.getElementById("criteriaList");
  criteriaList.innerHTML = ""; // καθάρισε παλιά στοιχεία

  if(scores.criteria){
    for(const [k,v] of Object.entries(scores.criteria)){
      const li = document.createElement("li");
      li.textContent = `${k}: ${v}/2`;
      criteriaList.appendChild(li);
    }
  }

  // Εμφάνιση συνολικού σκορ
  document.getElementById("totalScore").textContent = scores.total + "/10";
});

function toggleBusy(b){
  const btn = document.getElementById("scoreBtn");
  btn.disabled = b;
  btn.textContent = b ? "Υπολογισμός…" : "⚖️ Βαθμολογία";
}

// Εναλλαγή ενεργού παίκτη (κυκλικά)
document.getElementById('nextPlayerBtn').addEventListener('click', ()=>{
  game.activeIndex = (game.activeIndex + 1) % game.players.length;
  renderActivePlayer();
  clearInterval(timerInterval);
  startTimer(game.baseTimeSec);
});

// Bonus +30"
document.getElementById('bonusBtn').addEventListener('click', ()=>{
  const p = game.players[game.activeIndex];
  if(p.bonusLeft > 0){
    p.bonusLeft--; // χάνει την κάρτα
    // πρόσθεσε 30 sec στο χρονόμετρο
    const timerEl = document.getElementById("timer").textContent;
    if(/^\d+:\d+$/.test(timerEl)){
      const [min, sec] = timerEl.split(":").map(Number);
      let remaining = min*60 + sec + 30;
      startTimer(remaining);
    }
    renderActivePlayer(); // ενημέρωσε το κουμπί (να γκριζάρει)
  }
});

loadMissions();
renderActivePlayer();

// === Εκκίνηση Παιχνιδιού ===
document.getElementById("startGameBtn").addEventListener("click", () => {
  const playerCount = parseInt(document.getElementById("playerCount").value);
  const roundCount = parseInt(document.getElementById("roundCount").value);
  const useBonus = document.getElementById("useBonus").checked;

  // Βρες ποιοι χαρακτήρες επιλέχθηκαν
  const selected = Array.from(document.querySelectorAll(".character.selected"));
  if (selected.length < playerCount) {
    alert("Παρακαλώ επίλεξε όσους χαρακτήρες όσοι είναι οι παίκτες!");
    return;
  }

  // Δημιούργησε τη λίστα παικτών του παιχνιδιού
  game.players = selected.slice(0, playerCount).map(el => ({
    id: el.dataset.id,
    name: el.dataset.name,
    color: el.dataset.color,
    img: el.dataset.img,
    bonusLeft: useBonus ? 1 : 0
  }));
  game.currentRound = 1;
  game.totalRounds = roundCount;
  game.activeIndex = 0;

  // Απόκρυψε την οθόνη ρυθμίσεων
  document.getElementById("setupScreen").style.display = "none";

  // Εμφάνισε τον πρώτο παίκτη
  renderActivePlayer();
});
// === Εναλλαγή από Αρχική Οθόνη σε Setup Screen ===
document.getElementById("goToSetup").addEventListener("click", () => {
  document.getElementById("welcomeScreen").style.display = "none";
  document.getElementById("setupScreen").style.display = "flex";
});

// === Κουμπί Πληροφορίες (εμφανίζει οδηγίες παιχνιδιού) ===
document.getElementById("infoButton").addEventListener("click", () => {
  alert("📜 Οδηγίες Παιχνιδιού:\n\n1️⃣ Επίλεξε παίκτες και γύρους.\n2️⃣ Μίλα ή γράψε την απάντηση του παίκτη.\n3️⃣ Ο Σωκράτης θα τη βαθμολογήσει και θα σχολιάσει.\n\nΚαλή διασκέδαση!");
});

</script>
</body>
</html>
